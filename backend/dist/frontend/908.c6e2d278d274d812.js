"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[908],{3908:(N,d,l)=>{l.r(d),l.d(d,{VehicleModule:()=>y});var m=l(4755),c=l(9401),e=l(2223),g=l(9342),v=l(2018),f=l(6835),u=l(430),p=l(1728);function x(n,a){1&n&&(e.TgZ(0,"div"),e._uU(1,"Vehicle is required."),e.qZA())}function _(n,a){if(1&n&&(e.TgZ(0,"div",13),e.YNc(1,x,2,0,"div",1),e.qZA()),2&n){const t=e.oxw(2);let i;e.xp6(1),e.Q6J("ngIf",null==(i=t.vehicleForm.get("vehicleName"))||null==i.errors?null:i.errors.required)}}function b(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",4)(2,"div",5)(3,"form",6),e.NdJ("ngSubmit",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.addVehicle())}),e.TgZ(4,"div",7)(5,"label",8),e._uU(6,"Vehicle Type"),e.qZA(),e._UZ(7,"input",9),e.YNc(8,_,2,1,"div",10),e.qZA(),e.TgZ(9,"div",7)(10,"label",8),e._uU(11,"Add Vehicle Image"),e.qZA(),e.TgZ(12,"input",11),e.NdJ("change",function(o){e.CHM(t);const r=e.oxw();return e.KtG(r.onFileSelected(o))}),e.qZA()(),e.TgZ(13,"div")(14,"button",12),e._uU(15," Add"),e.qZA()()()()(),e.BQk()}if(2&n){const t=e.oxw();let i,o;e.xp6(3),e.Q6J("formGroup",t.vehicleForm),e.xp6(4),e.ekj("is-invalid",(null==(i=t.vehicleForm.get("vehicleName"))?null:i.invalid)&&((null==(i=t.vehicleForm.get("vehicleName"))?null:i.touched)||(null==(i=t.vehicleForm.get("vehicleName"))?null:i.dirty))),e.xp6(1),e.Q6J("ngIf",(null==(o=t.vehicleForm.get("vehicleName"))?null:o.invalid)&&((null==(o=t.vehicleForm.get("vehicleName"))?null:o.touched)||(null==(o=t.vehicleForm.get("vehicleName"))?null:o.dirty)))}}function F(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",4)(2,"div",5)(3,"form",6),e.NdJ("ngSubmit",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.updateVehicle())}),e.TgZ(4,"div",7)(5,"label",8),e._uU(6,"Vehicle Type"),e.qZA(),e._UZ(7,"input",9),e.qZA(),e.TgZ(8,"div",7)(9,"label",8),e._uU(10,"Add Vehicle Image"),e.qZA(),e.TgZ(11,"input",14),e.NdJ("change",function(o){e.CHM(t);const r=e.oxw();return e.KtG(r.onFileSelected(o))}),e.qZA()(),e.TgZ(12,"div")(13,"button",15),e._uU(14," Update"),e.qZA()()()()(),e.BQk()}if(2&n){const t=e.oxw();e.xp6(3),e.Q6J("formGroup",t.vehicleForm)}}function C(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",16),e._UZ(1,"img",17),e.TgZ(2,"div",18)(3,"h5",19),e._uU(4),e.qZA(),e.TgZ(5,"button",20),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.editVehicle(r))}),e.TgZ(6,"mat-icon"),e._uU(7,"edit"),e.qZA(),e._uU(8,"Edit "),e.qZA()()()}if(2&n){const t=a.$implicit;e.xp6(1),e.MGl("src","http://eberride-env.eba-83w3w3ik.ap-south-1.elasticbeanstalk.com/",t.vehicleImage,"",e.LSH),e.xp6(3),e.Oqu(t.vehicleName)}}let V=(()=>{class n{constructor(t,i,o,r,s){this.formbuilder=t,this._vehicle=i,this.cdr=o,this.toastr=r,this.authService=s,this.AddbuttonForm=!1,this.updateButtonForm=!1,this.isUpdate=!1}ngOnInit(){this.vehicleForm=this.formbuilder.group({vehicleName:["",[c.kI.required]]}),this._vehicle.getvehicleData().subscribe({next:t=>{this.vehiclesData=t.data.map(i=>({_id:i._id,vehicleName:i.vehicleName,vehicleImage:i.vehicleImage}))},error:t=>{alert(t)}})}onFileSelected(t){this.file=t.target.files[0]}addVehicle(){const t=new FormData;t.append("vehicleImage",this.file),t.append("vehicleName",this.vehicleForm.value.vehicleName),this.vehicleForm.valid?this._vehicle.registerVehicle(t).subscribe({next:i=>{this.vehiclesData.push(i.vehicle),this.vehicleForm.reset(),this.AddbuttonForm=!1,this.toastr.success(i.message)},error:i=>{console.log(i),this.toastr.warning(i.error.message)}}):this.toastr.warning("Please Fill Valid Details")}updateVehicle(){const t=new FormData;t.append("vehicleImage",this.file),t.append("vehicleName",this.vehicleForm.value.vehicleName),console.log(this.vehicleForm.value),this._vehicle.updateVehicle(this.id,t).subscribe({next:o=>{let r=o.vehicle;this.vehicleForm.reset(),this.updateButtonForm=!1,console.log(this.vehiclesData),this.file=null,this.toastr.success(o.message);let s=this.vehiclesData.find(h=>(console.log(h),h._id===r._id));console.log(s),Object.keys(s).forEach(h=>{s[h]=r[h]})},error:o=>{console.log(o),this.toastr.warning(o.error.message)}}),this.selectedVehicle=null}editVehicle(t){this.id=t._id,this.isUpdate=!0,this.selectedVehicle=t,console.log(this.vehicleForm),console.log(t.vehicleName),this.vehicleForm.patchValue({vehicleName:t.vehicleName}),this.updateButtonForm=!0,this.AddbuttonForm=!1}toggleFormVisibility(){this.AddbuttonForm=!this.AddbuttonForm,this.selectedVehicle=null,this.vehicleForm.reset(),this.updateButtonForm=!1}resetTimer(){this.authService.resetInactivityTimer()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(c.qu),e.Y36(g.f),e.Y36(e.sBO),e.Y36(v._W),e.Y36(f.e))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-vehicle"]],decls:6,vars:3,consts:[["id","showbtn",3,"click"],[4,"ngIf"],[1,"card-container","container","d-flex","flex-wrap"],["class","m-4 card",4,"ngFor","ngForOf"],[1,"parentFormContainer"],["id","formContainer"],[1,"container",3,"formGroup","ngSubmit"],[1,"mb-3"],[1,"form-label","d-flex","justify-content-start"],["type","text","formControlName","vehicleName",1,"form-control"],["class","invalid-feedback",4,"ngIf"],["type","file","formControlName","vehicleImage","name","vehicleImage",1,"form-control",3,"change"],["type","submit","id","Addbutton",1,"btn","btn-primary","w-100"],[1,"invalid-feedback"],["type","file","formControlName","vehicleImage","name","vehicleImage","ccept","image/png, image/jpg, image/gif, image/jpeg",1,"form-control",3,"change"],["type","submit","id","updateButton",1,"btn","btn-primary","w-100"],[1,"m-4","card"],["id","vehicle_image","name","image","alt","vehicle-image",1,"card-img-top",3,"src"],[1,"card-body"],[1,"card-title"],["mat-button","","mat-stroked-button","","color","primary","color","accent","mat-button","",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"button",0),e.NdJ("click",function(){return i.toggleFormVisibility()}),e._uU(1," Add Vehicle"),e.qZA(),e.YNc(2,b,16,4,"ng-container",1),e.YNc(3,F,15,1,"ng-container",1),e.TgZ(4,"div",2),e.YNc(5,C,9,2,"div",3),e.qZA()),2&t&&(e.xp6(2),e.Q6J("ngIf",i.AddbuttonForm),e.xp6(1),e.Q6J("ngIf",i.updateButtonForm),e.xp6(2),e.Q6J("ngForOf",i.vehiclesData))},dependencies:[m.sg,m.O5,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,u.Hw,p.lW],styles:["h1[_ngcontent-%COMP%]{font-family:cursive;padding:40px;color:#fff}.parentFormContainer[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;text-align:center;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}#formContainer[_ngcontent-%COMP%]{background-color:#fff;border-radius:10px;box-shadow:4px 4px 16px #000;width:90%;max-width:600px;padding:20px;margin:40px}input[_ngcontent-%COMP%]{width:100%;padding:5px}#showbtn[_ngcontent-%COMP%]{padding:10px;border-radius:5px;box-shadow:2px 2px 2px #4371e4;margin:20px;border:1px solid black}#showbtn[_ngcontent-%COMP%]:hover{transform:scale(1.1);transition:all linear .2s;z-index:1;box-shadow:2px 2px 20px #0000004d;cursor:pointer}@media screen and (max-width: 480px){#formContainer[_ngcontent-%COMP%]{width:90%;margin:20px}}@media screen and (max-width: 780px){#formContainer[_ngcontent-%COMP%]{width:80%;margin:20px}}.card-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;margin-top:3%}.card[_ngcontent-%COMP%]{border-radius:8px;border:1px solid #cccccc;display:flex;align-items:center;justify-content:center;box-sizing:border-box;width:200px;height:270px;margin:10px;transition:all linear .2s}@media screen and (max-width: 480px){.card[_ngcontent-%COMP%]{width:90%;height:auto}}"]}),n})();var Z=l(2480);const T=[{path:"",component:V,pathMatch:"full"}];let y=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[m.ez,Z.Bz.forChild(T),c.u5,c.UX,u.Ps,p.ot]}),n})()}}]);